{
  "timestamp": "2025-12-27T21:10:28.423233",
  "success": false,
  "results": [
    {
      "test": "Health Check",
      "status": "\u2705 PASS",
      "message": "API is healthy: {'status': 'healthy', 'service': 'bookaride-api'}",
      "details": {},
      "timestamp": "2025-12-27T21:10:14.748360"
    },
    {
      "test": "Admin Login",
      "status": "\u2705 PASS",
      "message": "Admin authentication successful",
      "details": {},
      "timestamp": "2025-12-27T21:10:14.987369"
    },
    {
      "test": "Customer Confirmation: Booking Creation",
      "status": "\u2705 PASS",
      "message": "Booking created successfully: ID=bookmend, Ref=#127",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.013924"
    },
    {
      "test": "Customer Confirmation: Data Validation",
      "status": "\u2705 PASS",
      "message": "Booking data correctly stored and returned",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.013950"
    },
    {
      "test": "Customer Confirmation: Admin Fetch Bookings",
      "status": "\u2705 PASS",
      "message": "Admin can fetch 50 bookings without errors",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.031414"
    },
    {
      "test": "Customer Confirmation: Search Test Customer",
      "status": "\u274c FAIL",
      "message": "Search request failed: 520",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.123069"
    },
    {
      "test": "Booking Creation Performance",
      "status": "\u2705 PASS",
      "message": "Booking created quickly in 0.01s (background tasks working): f76f31bb-2e51-4fdf-a36a-979e55e2ecfb",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.133208"
    },
    {
      "test": "Notification Preference: Email Only",
      "status": "\u2705 PASS",
      "message": "Booking created with email-only preference: f0896b2f-ce6a-46c5-94fa-868d5d81f764",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.185263"
    },
    {
      "test": "Notification Preference: SMS Only",
      "status": "\u2705 PASS",
      "message": "Booking created with SMS-only preference: 6e476489-c278-47d4-a9e6-111444d488d7",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.196492"
    },
    {
      "test": "Backend Logs Check",
      "status": "\u2705 PASS",
      "message": "Backend logs accessible (check for 'Background task completed' messages after booking creation)",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.209113"
    },
    {
      "test": "Historical Import: Status Endpoint",
      "status": "\u2705 PASS",
      "message": "Import status: 3322 total bookings, 3132 WordPress imports",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.265640"
    },
    {
      "test": "Historical Import: Expected Counts",
      "status": "\u2705 PASS",
      "message": "Counts match expected range: total=3322, imports=3132",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.265677"
    },
    {
      "test": "Historical Import: CSV Upload",
      "status": "\u2705 PASS",
      "message": "CSV import successful: 0 imported, 2 skipped, 0 errors",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.326612"
    },
    {
      "test": "Historical Import: Duplicate Detection",
      "status": "\u2705 PASS",
      "message": "Duplicate detection working: 0 imported, 2 skipped on second upload",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.382245"
    },
    {
      "test": "Historical Import: Bookings List",
      "status": "\u2705 PASS",
      "message": "Bookings list loaded: 50 total, 30 WordPress imports, 0 test imports",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.399295"
    },
    {
      "test": "Historical Import: Required Fields",
      "status": "\u2705 PASS",
      "message": "Imported bookings have all required fields: ['original_booking_id', 'imported_from', 'imported_at', 'pricing']",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.399327"
    },
    {
      "test": "Historical Import: Large Dataset",
      "status": "\u2705 PASS",
      "message": "Smaller dataset: 50 bookings (may be test environment)",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.399332"
    },
    {
      "test": "Batch Calendar Sync: Status Check",
      "status": "\u2705 PASS",
      "message": "Status endpoint working: 3072 remaining, 60 already synced, last_task: None",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.457895"
    },
    {
      "test": "Batch Calendar Sync: Start Sync",
      "status": "\u2705 PASS",
      "message": "Skipping sync start test - too many bookings (3072). Would take too long.",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.457935"
    },
    {
      "test": "24-Hour Rule: Within 24h",
      "status": "\u2705 PASS",
      "message": "Booking within 24h correctly set to 'pending_approval': 6251f5a7-9781-4aaf-9988-6b054340240a",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.479653"
    },
    {
      "test": "24-Hour Rule: Beyond 24h",
      "status": "\u2705 PASS",
      "message": "Booking beyond 24h correctly set to 'pending': 983ea084-f5f6-4efe-b127-44f9ae68f990",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.533303"
    },
    {
      "test": "Admin Dashboard: Pending Approval Count",
      "status": "\u2705 PASS",
      "message": "Found 1 bookings with status 'pending_approval'",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.742207"
    },
    {
      "test": "Admin Dashboard: Alert Banner Data",
      "status": "\u2705 PASS",
      "message": "Admin dashboard should show alert banner with 1 booking(s) needing approval",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.742231"
    },
    {
      "test": "SEO Pages: Backend Support",
      "status": "\u2705 PASS",
      "message": "SEO routes accessible: ['/auckland-cbd-airport', '/ponsonby-to-airport', '/parnell-to-airport', '/newmarket-to-airport']",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.809223"
    },
    {
      "test": "Shuttle Availability",
      "status": "\u2705 PASS",
      "message": "Shuttle availability returned 9 departure times with pricing",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.835646"
    },
    {
      "test": "Shuttle Booking",
      "status": "\u274c FAIL",
      "message": "Shuttle booking failed with status 400",
      "details": "{\"detail\":\"Not enough seats available for this departure\"}",
      "timestamp": "2025-12-27T21:10:15.892609"
    },
    {
      "test": "Shuttle Departures (Admin)",
      "status": "\u2705 PASS",
      "message": "Admin shuttle departures returned 9 departure slots",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.926821"
    },
    {
      "test": "Shuttle Departures: Bookings",
      "status": "\u2705 PASS",
      "message": "Found 5 shuttle bookings in departure grid",
      "details": {},
      "timestamp": "2025-12-27T21:10:15.926853"
    },
    {
      "test": "Shuttle Route Optimization",
      "status": "\u2705 PASS",
      "message": "Route optimization returned 0 stops with Google Maps URL",
      "details": {},
      "timestamp": "2025-12-27T21:10:16.179750"
    },
    {
      "test": "Shuttle Route: Google Maps URL",
      "status": "\u2705 PASS",
      "message": "Valid Google Maps URL generated: https://www.google.com/maps/dir/?api=1&origin=Sofitel%20Auckland%20Viaduct%20Harbour&destination=Auc...",
      "details": {},
      "timestamp": "2025-12-27T21:10:16.179779"
    },
    {
      "test": "GPS Tracking: Send Driver Link",
      "status": "\u274c FAIL",
      "message": "Send driver link failed with status 400",
      "details": "{\"detail\":\"Cannot send tracking link for patricia Dallas's booking on 2026-03-09. Tracking links can only be sent for today (2025-12-28) or tomorrow (2025-12-29).\"}",
      "timestamp": "2025-12-27T21:10:16.325598"
    },
    {
      "test": "GPS Tracking: Complete Flow",
      "status": "\u274c FAIL",
      "message": "Failed to send driver link",
      "details": {},
      "timestamp": "2025-12-27T21:10:16.325691"
    },
    {
      "test": "Pricing: Orewa to Airport (ratePerKm)",
      "status": "\u2705 PASS",
      "message": "Correct pricing with ratePerKm: $150.18 for 60.8km at $2.47/km (expected ~$2.47/km)",
      "details": {},
      "timestamp": "2025-12-27T21:10:16.527448"
    },
    {
      "test": "Pricing: Short Trip (ratePerKm)",
      "status": "\u2705 PASS",
      "message": "Correct short trip pricing with ratePerKm: $116.4 for 9.7km at $12.0/km (expected $12.0/km)",
      "details": {},
      "timestamp": "2025-12-27T21:10:16.675676"
    },
    {
      "test": "Booking Update: Return Trip Sync (Set)",
      "status": "\u2705 PASS",
      "message": "bookReturn auto-synced to true when returnDate set to 2025-12-25",
      "details": {},
      "timestamp": "2025-12-27T21:10:16.758163"
    },
    {
      "test": "Booking Update: Return Trip Sync (Clear)",
      "status": "\u2705 PASS",
      "message": "bookReturn auto-synced to false when returnDate cleared",
      "details": {},
      "timestamp": "2025-12-27T21:10:16.824593"
    },
    {
      "test": "Email Generation: Manual Booking",
      "status": "\u2705 PASS",
      "message": "Manual booking created: 7823eb8e-6c73-41ac-9dbd-3978d52731ad",
      "details": {},
      "timestamp": "2025-12-27T21:10:16.878702"
    },
    {
      "test": "Email Generation: Return Trips",
      "status": "\u2705 PASS",
      "message": "Confirmation email resent successfully: Confirmation email and SMS resent successfully!",
      "details": {},
      "timestamp": "2025-12-27T21:10:17.368776"
    },
    {
      "test": "Flight Tracker",
      "status": "\u274c FAIL",
      "message": "Incomplete flight data: Flight: EK448, Live: False, Status: On Time",
      "details": {},
      "timestamp": "2025-12-27T21:10:17.686130"
    },
    {
      "test": "Driver Assignment Flow",
      "status": "\u274c FAIL",
      "message": "Unexpected assignment response: Driver John Smith assigned to OUTBOUND trip successfully",
      "details": {},
      "timestamp": "2025-12-27T21:10:18.198440"
    },
    {
      "test": "AI Email Auto-Responder",
      "status": "\u2705 PASS",
      "message": "AI auto-responder working: AI response sent",
      "details": {},
      "timestamp": "2025-12-27T21:10:24.879206"
    },
    {
      "test": "Payment Checkout Creation",
      "status": "\u2705 PASS",
      "message": "Checkout session created successfully: cs_live_a11ZzHGe8z4UNe5JEwAy4uB8kJLn0V8hMenqpyqKRTEZPooMFAvLxm0CVp",
      "details": {},
      "timestamp": "2025-12-27T21:10:25.472619"
    },
    {
      "test": "Duplicate Reminder Prevention: Create Booking",
      "status": "\u2705 PASS",
      "message": "Test booking created: b2112ed2-5c73-455c-93dc-a0ab3c655263",
      "details": {},
      "timestamp": "2025-12-27T21:10:25.499674"
    },
    {
      "test": "Duplicate Reminder Prevention: Initial Status",
      "status": "\u2705 PASS",
      "message": "Initial pending reminders: 0",
      "details": {},
      "timestamp": "2025-12-27T21:10:25.562871"
    },
    {
      "test": "Duplicate Reminder Prevention: First Trigger",
      "status": "\u2705 PASS",
      "message": "First trigger: 0 sent, 0 skipped",
      "details": {},
      "timestamp": "2025-12-27T21:10:25.649276"
    },
    {
      "test": "Duplicate Reminder Prevention: Second Trigger",
      "status": "\u2705 PASS",
      "message": "Second trigger: 0 sent, 0 skipped",
      "details": {},
      "timestamp": "2025-12-27T21:10:25.649309"
    },
    {
      "test": "Duplicate Reminder Prevention: Final Status",
      "status": "\u2705 PASS",
      "message": "Final status: 0 sent, 0 pending",
      "details": {},
      "timestamp": "2025-12-27T21:10:27.660058"
    },
    {
      "test": "Duplicate Reminder Prevention: Third Trigger",
      "status": "\u2705 PASS",
      "message": "Third trigger correctly sent 0 reminders: 0 sent, 0 skipped (already processed)",
      "details": {},
      "timestamp": "2025-12-27T21:10:27.712377"
    },
    {
      "test": "Duplicate Reminder Prevention: Validation",
      "status": "\u274c FAIL",
      "message": "\u274c FAILED: 0 reminders sent (expected 1), duplicate prevention not working",
      "details": {},
      "timestamp": "2025-12-27T21:10:27.712404"
    },
    {
      "test": "Direct Mailgun Test",
      "status": "\u2705 PASS",
      "message": "Email sent successfully: Queued. Thank you.",
      "details": {},
      "timestamp": "2025-12-27T21:10:27.909743"
    },
    {
      "test": "Price Calculation",
      "status": "\u2705 PASS",
      "message": "Price calculated: $136.45 for 26.29km",
      "details": {},
      "timestamp": "2025-12-27T21:10:28.038674"
    },
    {
      "test": "Create Booking (EN)",
      "status": "\u2705 PASS",
      "message": "Booking created: 5cccbe12-5644-4303-85a2-d4bdc7eb8e73",
      "details": {},
      "timestamp": "2025-12-27T21:10:28.089218"
    },
    {
      "test": "Get Bookings",
      "status": "\u2705 PASS",
      "message": "Retrieved 50 bookings",
      "details": {},
      "timestamp": "2025-12-27T21:10:28.109772"
    },
    {
      "test": "Create Booking (EN)",
      "status": "\u2705 PASS",
      "message": "Booking created: bae79f11-2e1f-45e2-bc19-efa220bd1e8f",
      "details": {},
      "timestamp": "2025-12-27T21:10:28.160051"
    },
    {
      "test": "Stripe Webhook Test",
      "status": "\u274c FAIL",
      "message": "Webhook failed with status 400",
      "details": "{\"detail\":\"Missing Stripe signature\"}",
      "timestamp": "2025-12-27T21:10:28.168144"
    },
    {
      "test": "Google OAuth Endpoint",
      "status": "\u2705 PASS",
      "message": "Google OAuth endpoint exists and validates sessions correctly",
      "details": {},
      "timestamp": "2025-12-27T21:10:28.305035"
    },
    {
      "test": "Password Reset Request",
      "status": "\u2705 PASS",
      "message": "Password reset request successful: If this email is registered, you will receive a password reset link.",
      "details": {},
      "timestamp": "2025-12-27T21:10:28.354330"
    },
    {
      "test": "Password Reset Validate",
      "status": "\u2705 PASS",
      "message": "Password reset validation endpoint working correctly",
      "details": {},
      "timestamp": "2025-12-27T21:10:28.362888"
    },
    {
      "test": "Password Reset Confirm",
      "status": "\u2705 PASS",
      "message": "Password reset confirm endpoint working correctly",
      "details": {},
      "timestamp": "2025-12-27T21:10:28.373592"
    },
    {
      "test": "Admin Auth Me Endpoint",
      "status": "\u2705 PASS",
      "message": "Admin auth/me endpoint exists (status: 200)",
      "details": {},
      "timestamp": "2025-12-27T21:10:28.422400"
    }
  ],
  "booking_ids": [
    "5cccbe12-5644-4303-85a2-d4bdc7eb8e73",
    "bae79f11-2e1f-45e2-bc19-efa220bd1e8f"
  ]
}