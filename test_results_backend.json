{
  "timestamp": "2025-12-21T20:43:08.043283",
  "success": false,
  "results": [
    {
      "test": "Health Check",
      "status": "\u2705 PASS",
      "message": "API is healthy: {'status': 'healthy', 'service': 'bookaride-api'}",
      "details": {},
      "timestamp": "2025-12-21T20:42:52.911768"
    },
    {
      "test": "Admin Login",
      "status": "\u2705 PASS",
      "message": "Admin authentication successful",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.192100"
    },
    {
      "test": "Booking Creation Performance",
      "status": "\u2705 PASS",
      "message": "Booking created quickly in 0.08s (background tasks working): 48c9ccf7-713e-4fca-bffc-cd1e7d25e886",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.269684"
    },
    {
      "test": "Notification Preference: Email Only",
      "status": "\u2705 PASS",
      "message": "Booking created with email-only preference: 4dc6c8a7-2116-4a3f-b203-81f77441163b",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.284276"
    },
    {
      "test": "Notification Preference: SMS Only",
      "status": "\u2705 PASS",
      "message": "Booking created with SMS-only preference: fee051ab-af09-4006-a341-c2d844a776f2",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.336060"
    },
    {
      "test": "Backend Logs Check",
      "status": "\u2705 PASS",
      "message": "Backend logs accessible (check for 'Background task completed' messages after booking creation)",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.350860"
    },
    {
      "test": "Historical Import: Status Endpoint",
      "status": "\u2705 PASS",
      "message": "Import status: 3296 total bookings, 3132 WordPress imports",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.367383"
    },
    {
      "test": "Historical Import: Expected Counts",
      "status": "\u2705 PASS",
      "message": "Counts match expected range: total=3296, imports=3132",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.367416"
    },
    {
      "test": "Historical Import: CSV Upload",
      "status": "\u2705 PASS",
      "message": "CSV import successful: 0 imported, 2 skipped, 0 errors",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.388390"
    },
    {
      "test": "Historical Import: Duplicate Detection",
      "status": "\u2705 PASS",
      "message": "Duplicate detection working: 0 imported, 2 skipped on second upload",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.445152"
    },
    {
      "test": "Historical Import: Bookings List",
      "status": "\u2705 PASS",
      "message": "Bookings list loaded: 50 total, 33 WordPress imports, 0 test imports",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.465298"
    },
    {
      "test": "Historical Import: Required Fields",
      "status": "\u2705 PASS",
      "message": "Imported bookings have all required fields: ['original_booking_id', 'imported_from', 'imported_at', 'pricing']",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.465340"
    },
    {
      "test": "Historical Import: Large Dataset",
      "status": "\u2705 PASS",
      "message": "Smaller dataset: 50 bookings (may be test environment)",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.465345"
    },
    {
      "test": "Batch Calendar Sync: Status Check",
      "status": "\u2705 PASS",
      "message": "Status endpoint working: 3132 remaining, 0 already synced, last_task: None",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.485307"
    },
    {
      "test": "Batch Calendar Sync: Start Sync",
      "status": "\u2705 PASS",
      "message": "Skipping sync start test - too many bookings (3132). Would take too long.",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.485343"
    },
    {
      "test": "24-Hour Rule: Within 24h",
      "status": "\u274c FAIL",
      "message": "Booking within 24h has wrong status: 'pending' (expected 'pending_approval')",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.613985"
    },
    {
      "test": "24-Hour Rule: Beyond 24h",
      "status": "\u2705 PASS",
      "message": "Booking beyond 24h correctly set to 'pending': 4df0cf17-a060-456c-a48c-11b7be9997b6",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.753344"
    },
    {
      "test": "Admin Dashboard: Pending Approval Count",
      "status": "\u2705 PASS",
      "message": "Found 0 bookings with status 'pending_approval'",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.782260"
    },
    {
      "test": "Admin Dashboard: Alert Banner Data",
      "status": "\u2705 PASS",
      "message": "No pending_approval bookings found - alert banner should not appear",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.782288"
    },
    {
      "test": "SEO Pages: Backend Support",
      "status": "\u2705 PASS",
      "message": "SEO routes accessible: ['/auckland-cbd-airport', '/ponsonby-to-airport', '/parnell-to-airport', '/newmarket-to-airport']",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.843168"
    },
    {
      "test": "Shuttle Availability",
      "status": "\u2705 PASS",
      "message": "Shuttle availability returned 9 departure times with pricing",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.857775"
    },
    {
      "test": "Shuttle Booking",
      "status": "\u274c FAIL",
      "message": "Shuttle booking failed with status 400",
      "details": "{\"detail\":\"Not enough seats available for this departure\"}",
      "timestamp": "2025-12-21T20:42:53.870798"
    },
    {
      "test": "Shuttle Departures (Admin)",
      "status": "\u2705 PASS",
      "message": "Admin shuttle departures returned 9 departure slots",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.897816"
    },
    {
      "test": "Shuttle Departures: Bookings",
      "status": "\u2705 PASS",
      "message": "Found 5 shuttle bookings in departure grid",
      "details": {},
      "timestamp": "2025-12-21T20:42:53.897938"
    },
    {
      "test": "Shuttle Route Optimization",
      "status": "\u2705 PASS",
      "message": "Route optimization returned 0 stops with Google Maps URL",
      "details": {},
      "timestamp": "2025-12-21T20:42:54.141297"
    },
    {
      "test": "Shuttle Route: Google Maps URL",
      "status": "\u2705 PASS",
      "message": "Valid Google Maps URL generated: https://www.google.com/maps/dir/?api=1&origin=Sofitel%20Auckland%20Viaduct%20Harbour&destination=Auc...",
      "details": {},
      "timestamp": "2025-12-21T20:42:54.141321"
    },
    {
      "test": "GPS Tracking: Send Driver Link",
      "status": "\u2705 PASS",
      "message": "Tracking link sent successfully: sessionId=6ffcd849-e5e6-48e3-8171-13300959670e, trackingRef=GNTNFL",
      "details": {},
      "timestamp": "2025-12-21T20:42:54.707382"
    },
    {
      "test": "GPS Tracking: Driver Session Info",
      "status": "\u2705 PASS",
      "message": "Driver session info retrieved: customer=patricia Dallas, status=pending",
      "details": {},
      "timestamp": "2025-12-21T20:42:54.755202"
    },
    {
      "test": "GPS Tracking: Driver Start",
      "status": "\u2705 PASS",
      "message": "Driver tracking started successfully: Tracking started, customer notified",
      "details": {},
      "timestamp": "2025-12-21T20:42:55.049352"
    },
    {
      "test": "GPS Tracking: Driver Location Update",
      "status": "\u2705 PASS",
      "message": "Driver location updated successfully: lat=-36.862, lng=174.7682",
      "details": {},
      "timestamp": "2025-12-21T20:42:55.102008"
    },
    {
      "test": "GPS Tracking: Customer View",
      "status": "\u2705 PASS",
      "message": "Customer tracking working: driver=Craig Canty, ETA=44 minutes, location={'lat': -36.862, 'lng': 174.7682, 'heading': None, 'speed': None, 'accuracy': None, 'timestamp': '2025-12-21T20:42:55.055473+00:00'}",
      "details": {},
      "timestamp": "2025-12-21T20:42:55.295851"
    },
    {
      "test": "GPS Tracking: Complete Flow",
      "status": "\u2705 PASS",
      "message": "Complete GPS tracking flow working: sessionId=6ffcd849-e5e6-48e3-8171-13300959670e, trackingRef=GNTNFL",
      "details": {},
      "timestamp": "2025-12-21T20:42:55.295884"
    },
    {
      "test": "Pricing: Orewa to Airport (ratePerKm)",
      "status": "\u2705 PASS",
      "message": "Correct pricing with ratePerKm: $150.18 for 60.8km at $2.47/km (expected ~$2.47/km)",
      "details": {},
      "timestamp": "2025-12-21T20:42:55.469288"
    },
    {
      "test": "Pricing: Short Trip (ratePerKm)",
      "status": "\u2705 PASS",
      "message": "Correct short trip pricing with ratePerKm: $116.4 for 9.7km at $12.0/km (expected $12.0/km)",
      "details": {},
      "timestamp": "2025-12-21T20:42:55.675803"
    },
    {
      "test": "Booking Update: Return Trip Sync (Set)",
      "status": "\u2705 PASS",
      "message": "bookReturn auto-synced to true when returnDate set to 2025-12-25",
      "details": {},
      "timestamp": "2025-12-21T20:42:55.713544"
    },
    {
      "test": "Booking Update: Return Trip Sync (Clear)",
      "status": "\u2705 PASS",
      "message": "bookReturn auto-synced to false when returnDate cleared",
      "details": {},
      "timestamp": "2025-12-21T20:42:55.779635"
    },
    {
      "test": "Email Generation: Manual Booking",
      "status": "\u2705 PASS",
      "message": "Manual booking created: 383a06f7-2396-48f8-99ed-628c9bd86959",
      "details": {},
      "timestamp": "2025-12-21T20:42:55.828316"
    },
    {
      "test": "Email Generation: Return Trips",
      "status": "\u2705 PASS",
      "message": "Confirmation email resent successfully: Confirmation email and SMS resent successfully!",
      "details": {},
      "timestamp": "2025-12-21T20:42:56.341977"
    },
    {
      "test": "Flight Tracker",
      "status": "\u2705 PASS",
      "message": "Flight tracking working: EK448, Status: In Flight, Live: True",
      "details": {},
      "timestamp": "2025-12-21T20:42:56.718700"
    },
    {
      "test": "Driver Assignment Flow",
      "status": "\u274c FAIL",
      "message": "Unexpected assignment response: Driver John Smith assigned to OUTBOUND trip successfully",
      "details": {},
      "timestamp": "2025-12-21T20:42:57.282970"
    },
    {
      "test": "AI Email Auto-Responder",
      "status": "\u2705 PASS",
      "message": "AI auto-responder working: AI response sent",
      "details": {},
      "timestamp": "2025-12-21T20:43:04.145571"
    },
    {
      "test": "Payment Checkout Creation",
      "status": "\u2705 PASS",
      "message": "Checkout session created successfully: cs_live_a1VAMwwOGAX3bvkZzGrDZ2tI1zzW66PKopnUqzYcqULrWd8HvxsyCdRcsy",
      "details": {},
      "timestamp": "2025-12-21T20:43:04.706485"
    },
    {
      "test": "Duplicate Reminder Prevention: Create Booking",
      "status": "\u2705 PASS",
      "message": "Test booking created: 4a3471f8-7808-4f4d-a1a3-1024484de092",
      "details": {},
      "timestamp": "2025-12-21T20:43:04.716090"
    },
    {
      "test": "Duplicate Reminder Prevention: Initial Status",
      "status": "\u2705 PASS",
      "message": "Initial pending reminders: 1",
      "details": {},
      "timestamp": "2025-12-21T20:43:04.724894"
    },
    {
      "test": "Duplicate Reminder Prevention: First Trigger",
      "status": "\u2705 PASS",
      "message": "First trigger: 0 sent, 0 skipped",
      "details": {},
      "timestamp": "2025-12-21T20:43:05.336348"
    },
    {
      "test": "Duplicate Reminder Prevention: Second Trigger",
      "status": "\u2705 PASS",
      "message": "Second trigger: 0 sent, 0 skipped",
      "details": {},
      "timestamp": "2025-12-21T20:43:05.336384"
    },
    {
      "test": "Duplicate Reminder Prevention: Final Status",
      "status": "\u2705 PASS",
      "message": "Final status: 4 sent, 0 pending",
      "details": {},
      "timestamp": "2025-12-21T20:43:07.346113"
    },
    {
      "test": "Duplicate Reminder Prevention: Third Trigger",
      "status": "\u2705 PASS",
      "message": "Third trigger correctly sent 0 reminders: 0 sent, 0 skipped (already processed)",
      "details": {},
      "timestamp": "2025-12-21T20:43:07.395592"
    },
    {
      "test": "Duplicate Reminder Prevention: Validation",
      "status": "\u274c FAIL",
      "message": "\u274c FAILED: 0 reminders sent (expected 1), duplicate prevention not working",
      "details": {},
      "timestamp": "2025-12-21T20:43:07.395622"
    },
    {
      "test": "Direct Mailgun Test",
      "status": "\u2705 PASS",
      "message": "Email sent successfully: Queued. Thank you.",
      "details": {},
      "timestamp": "2025-12-21T20:43:07.596908"
    },
    {
      "test": "Price Calculation",
      "status": "\u2705 PASS",
      "message": "Price calculated: $136.45 for 26.29km",
      "details": {},
      "timestamp": "2025-12-21T20:43:07.763046"
    },
    {
      "test": "Create Booking (EN)",
      "status": "\u2705 PASS",
      "message": "Booking created: 879cb88c-af78-4da2-b316-b23ae88d0c59",
      "details": {},
      "timestamp": "2025-12-21T20:43:07.812179"
    },
    {
      "test": "Get Bookings",
      "status": "\u2705 PASS",
      "message": "Retrieved 50 bookings",
      "details": {},
      "timestamp": "2025-12-21T20:43:07.825976"
    },
    {
      "test": "Create Booking (EN)",
      "status": "\u2705 PASS",
      "message": "Booking created: 3b73a939-3b8e-4925-8581-6ce4a6b597fc",
      "details": {},
      "timestamp": "2025-12-21T20:43:07.875179"
    },
    {
      "test": "Stripe Webhook Test",
      "status": "\u274c FAIL",
      "message": "Webhook failed with status 400",
      "details": "{\"detail\":\"Missing Stripe signature\"}",
      "timestamp": "2025-12-21T20:43:07.881219"
    },
    {
      "test": "Google OAuth Endpoint",
      "status": "\u2705 PASS",
      "message": "Google OAuth endpoint exists and validates sessions correctly",
      "details": {},
      "timestamp": "2025-12-21T20:43:07.962206"
    },
    {
      "test": "Password Reset Request",
      "status": "\u2705 PASS",
      "message": "Password reset request successful: If this email is registered, you will receive a password reset link.",
      "details": {},
      "timestamp": "2025-12-21T20:43:07.969885"
    },
    {
      "test": "Password Reset Validate",
      "status": "\u2705 PASS",
      "message": "Password reset validation endpoint working correctly",
      "details": {},
      "timestamp": "2025-12-21T20:43:07.976471"
    },
    {
      "test": "Password Reset Confirm",
      "status": "\u2705 PASS",
      "message": "Password reset confirm endpoint working correctly",
      "details": {},
      "timestamp": "2025-12-21T20:43:08.024616"
    },
    {
      "test": "Admin Auth Me Endpoint",
      "status": "\u2705 PASS",
      "message": "Admin auth/me endpoint exists (status: 200)",
      "details": {},
      "timestamp": "2025-12-21T20:43:08.043065"
    }
  ],
  "booking_ids": [
    "879cb88c-af78-4da2-b316-b23ae88d0c59",
    "3b73a939-3b8e-4925-8581-6ce4a6b597fc"
  ]
}