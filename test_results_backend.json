{
  "timestamp": "2025-12-30T03:07:52.099965",
  "success": false,
  "results": [
    {
      "test": "Health Check",
      "status": "\u2705 PASS",
      "message": "API is healthy: {'status': 'healthy', 'service': 'bookaride-api'}",
      "details": {},
      "timestamp": "2025-12-30T03:07:38.703587"
    },
    {
      "test": "Admin Login",
      "status": "\u2705 PASS",
      "message": "Admin authentication successful",
      "details": {},
      "timestamp": "2025-12-30T03:07:38.938811"
    },
    {
      "test": "Return Flight: With Flight Number",
      "status": "\u2705 PASS",
      "message": "Booking created successfully with return flight NZ456: e8805210-3fcb-4e43-a14d-c9bc4f5da42b, Ref: #146",
      "details": {},
      "timestamp": "2025-12-30T03:07:38.950449"
    },
    {
      "test": "Return Flight: Without Flight Number",
      "status": "\u2705 PASS",
      "message": "Validation correctly rejected booking without return flight number",
      "details": {},
      "timestamp": "2025-12-30T03:07:38.999641"
    },
    {
      "test": "Return Flight: Existing Booking Retrieval",
      "status": "\u2705 PASS",
      "message": "Found booking 7ed7315d-47b3-4a3c-9f7a-fc4d0140a694 with return flight NZ456",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.041805"
    },
    {
      "test": "Return Flight: Email Preview",
      "status": "\u274c FAIL",
      "message": "Email preview endpoint not found or booking 7ed7315d-47b3-4a3c-9f7a-fc4d0140a694 not found",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.090765"
    },
    {
      "test": "Customer Confirmation: Booking Creation",
      "status": "\u2705 PASS",
      "message": "Booking created successfully: ID=f29a524b-36ff-4a28-93e0-b6a051fe88f3, Ref=#147",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.101432"
    },
    {
      "test": "Customer Confirmation: Data Validation",
      "status": "\u2705 PASS",
      "message": "Booking data correctly stored and returned",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.101457"
    },
    {
      "test": "Customer Confirmation: Admin Fetch Bookings",
      "status": "\u2705 PASS",
      "message": "Admin can fetch 50 bookings without errors",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.171620"
    },
    {
      "test": "Customer Confirmation: Search Test Customer",
      "status": "\u2705 PASS",
      "message": "Search for 'Test Customer' found booking: 1e33c96d-de55-4c4d-9192-32b8608dd11f",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.194057"
    },
    {
      "test": "Customer Confirmation: Backend Logs",
      "status": "\u2705 PASS",
      "message": "Backend should log 'Queued customer confirmation for booking #147' (check supervisor logs)",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.194079"
    },
    {
      "test": "Booking Creation Performance",
      "status": "\u2705 PASS",
      "message": "Booking created quickly in 0.01s (background tasks working): 76bdafa7-e035-4ab0-a031-c0fabe0bacf3",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.205424"
    },
    {
      "test": "Notification Preference: Email Only",
      "status": "\u2705 PASS",
      "message": "Booking created with email-only preference: 17db92a9-0b92-4423-b21f-0254412a6429",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.254609"
    },
    {
      "test": "Notification Preference: SMS Only",
      "status": "\u2705 PASS",
      "message": "Booking created with SMS-only preference: 284f5922-abc9-4e00-9f87-4deb7cc8b624",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.306548"
    },
    {
      "test": "Backend Logs Check",
      "status": "\u2705 PASS",
      "message": "Backend logs accessible (check for 'Background task completed' messages after booking creation)",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.312942"
    },
    {
      "test": "Historical Import: Status Endpoint",
      "status": "\u2705 PASS",
      "message": "Import status: 3347 total bookings, 3132 WordPress imports",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.326770"
    },
    {
      "test": "Historical Import: Expected Counts",
      "status": "\u2705 PASS",
      "message": "Counts match expected range: total=3347, imports=3132",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.326798"
    },
    {
      "test": "Historical Import: CSV Upload",
      "status": "\u2705 PASS",
      "message": "CSV import successful: 0 imported, 2 skipped, 0 errors",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.384588"
    },
    {
      "test": "Historical Import: Duplicate Detection",
      "status": "\u2705 PASS",
      "message": "Duplicate detection working: 0 imported, 2 skipped on second upload",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.396208"
    },
    {
      "test": "Historical Import: Bookings List",
      "status": "\u2705 PASS",
      "message": "Bookings list loaded: 50 total, 22 WordPress imports, 0 test imports",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.433942"
    },
    {
      "test": "Historical Import: Required Fields",
      "status": "\u2705 PASS",
      "message": "Imported bookings have all required fields: ['original_booking_id', 'imported_from', 'imported_at', 'pricing']",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.433975"
    },
    {
      "test": "Historical Import: Large Dataset",
      "status": "\u2705 PASS",
      "message": "Smaller dataset: 50 bookings (may be test environment)",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.433980"
    },
    {
      "test": "Batch Calendar Sync: Status Check",
      "status": "\u2705 PASS",
      "message": "Status endpoint working: 3072 remaining, 60 already synced, last_task: None",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.558494"
    },
    {
      "test": "Batch Calendar Sync: Start Sync",
      "status": "\u2705 PASS",
      "message": "Skipping sync start test - too many bookings (3072). Would take too long.",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.558534"
    },
    {
      "test": "24-Hour Rule: Within 24h",
      "status": "\u2705 PASS",
      "message": "Booking within 24h correctly set to 'pending_approval': a111a404-b58f-40e7-9058-89e8b9ca7c74",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.646875"
    },
    {
      "test": "24-Hour Rule: Beyond 24h",
      "status": "\u2705 PASS",
      "message": "Booking beyond 24h correctly set to 'pending': 8531bdb2-6dd3-4f6a-bf84-cb11cf5a91b4",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.718438"
    },
    {
      "test": "Admin Dashboard: Pending Approval Count",
      "status": "\u2705 PASS",
      "message": "Found 6 bookings with status 'pending_approval'",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.804870"
    },
    {
      "test": "Admin Dashboard: Alert Banner Data",
      "status": "\u2705 PASS",
      "message": "Admin dashboard should show alert banner with 6 booking(s) needing approval",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.804893"
    },
    {
      "test": "SEO Pages: Backend Support",
      "status": "\u2705 PASS",
      "message": "SEO routes accessible: ['/auckland-cbd-airport', '/ponsonby-to-airport', '/parnell-to-airport', '/newmarket-to-airport']",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.838932"
    },
    {
      "test": "Shuttle Availability",
      "status": "\u2705 PASS",
      "message": "Shuttle availability returned 9 departure times with pricing",
      "details": {},
      "timestamp": "2025-12-30T03:07:39.929156"
    },
    {
      "test": "Shuttle Booking",
      "status": "\u274c FAIL",
      "message": "Shuttle booking failed with status 400",
      "details": "{\"detail\":\"Not enough seats available for this departure\"}",
      "timestamp": "2025-12-30T03:07:40.033651"
    },
    {
      "test": "Shuttle Departures (Admin)",
      "status": "\u2705 PASS",
      "message": "Admin shuttle departures returned 9 departure slots",
      "details": {},
      "timestamp": "2025-12-30T03:07:40.088844"
    },
    {
      "test": "Shuttle Departures: Bookings",
      "status": "\u2705 PASS",
      "message": "Found 5 shuttle bookings in departure grid",
      "details": {},
      "timestamp": "2025-12-30T03:07:40.088877"
    },
    {
      "test": "Shuttle Route Optimization",
      "status": "\u2705 PASS",
      "message": "Route optimization returned 0 stops with Google Maps URL",
      "details": {},
      "timestamp": "2025-12-30T03:07:40.443860"
    },
    {
      "test": "Shuttle Route: Google Maps URL",
      "status": "\u2705 PASS",
      "message": "Valid Google Maps URL generated: https://www.google.com/maps/dir/?api=1&origin=Sofitel%20Auckland%20Viaduct%20Harbour&destination=Auc...",
      "details": {},
      "timestamp": "2025-12-30T03:07:40.443886"
    },
    {
      "test": "GPS Tracking: Send Driver Link",
      "status": "\u2705 PASS",
      "message": "Tracking link sent successfully: sessionId=181af55a-7bfa-4efc-b6a3-b43b8376f651, trackingRef=Q3K2RS",
      "details": {},
      "timestamp": "2025-12-30T03:07:40.856935"
    },
    {
      "test": "GPS Tracking: Driver Session Info",
      "status": "\u2705 PASS",
      "message": "Driver session info retrieved: customer=Melvin, status=pending",
      "details": {},
      "timestamp": "2025-12-30T03:07:40.865553"
    },
    {
      "test": "GPS Tracking: Driver Start",
      "status": "\u2705 PASS",
      "message": "Driver tracking started successfully: Tracking started, customer notified",
      "details": {},
      "timestamp": "2025-12-30T03:07:41.110688"
    },
    {
      "test": "GPS Tracking: Driver Location Update",
      "status": "\u2705 PASS",
      "message": "Driver location updated successfully: lat=-36.862, lng=174.7682",
      "details": {},
      "timestamp": "2025-12-30T03:07:41.118788"
    },
    {
      "test": "GPS Tracking: Customer View",
      "status": "\u2705 PASS",
      "message": "Customer tracking working: driver=Karan , ETA=14 minutes, location={'lat': -36.862, 'lng': 174.7682, 'heading': None, 'speed': None, 'accuracy': None, 'timestamp': '2025-12-30T03:07:41.115924+00:00'}",
      "details": {},
      "timestamp": "2025-12-30T03:07:41.318907"
    },
    {
      "test": "GPS Tracking: Complete Flow",
      "status": "\u2705 PASS",
      "message": "Complete GPS tracking flow working: sessionId=181af55a-7bfa-4efc-b6a3-b43b8376f651, trackingRef=Q3K2RS",
      "details": {},
      "timestamp": "2025-12-30T03:07:41.318946"
    },
    {
      "test": "Pricing: Orewa to Airport (ratePerKm)",
      "status": "\u2705 PASS",
      "message": "Correct pricing with ratePerKm: $171.72 for 60.8km at $2.74/km (expected ~$2.47/km)",
      "details": {},
      "timestamp": "2025-12-30T03:07:41.463024"
    },
    {
      "test": "Pricing: Short Trip (ratePerKm)",
      "status": "\u274c FAIL",
      "message": "Incorrect rate per km for short trip: $13.33/km for 9.7km (expected $12.0/km)",
      "details": {},
      "timestamp": "2025-12-30T03:07:41.664664"
    },
    {
      "test": "Booking Update: Return Trip Sync (Set)",
      "status": "\u2705 PASS",
      "message": "bookReturn auto-synced to true when returnDate set to 2025-12-25",
      "details": {},
      "timestamp": "2025-12-30T03:07:41.743750"
    },
    {
      "test": "Booking Update: Return Trip Sync (Clear)",
      "status": "\u2705 PASS",
      "message": "bookReturn auto-synced to false when returnDate cleared",
      "details": {},
      "timestamp": "2025-12-30T03:07:41.788797"
    },
    {
      "test": "Email Generation: Manual Booking",
      "status": "\u2705 PASS",
      "message": "Manual booking created: 106aa1f3-13bb-4e2c-9e5a-df977c731161",
      "details": {},
      "timestamp": "2025-12-30T03:07:41.837422"
    },
    {
      "test": "Email Generation: Return Trips",
      "status": "\u2705 PASS",
      "message": "Confirmation email resent successfully: Confirmation email and SMS resent successfully!",
      "details": {},
      "timestamp": "2025-12-30T03:07:42.282197"
    },
    {
      "test": "Flight Tracker",
      "status": "\u274c FAIL",
      "message": "Incomplete flight data: Flight: EK448, Live: False, Status: On Time",
      "details": {},
      "timestamp": "2025-12-30T03:07:42.612787"
    },
    {
      "test": "Driver Assignment Flow",
      "status": "\u274c FAIL",
      "message": "Unexpected assignment response: Driver John Smith assigned to OUTBOUND trip successfully",
      "details": {},
      "timestamp": "2025-12-30T03:07:43.104968"
    },
    {
      "test": "AI Email Auto-Responder",
      "status": "\u2705 PASS",
      "message": "AI auto-responder working: AI response sent",
      "details": {},
      "timestamp": "2025-12-30T03:07:48.550590"
    },
    {
      "test": "Payment Checkout Creation",
      "status": "\u2705 PASS",
      "message": "Checkout session created successfully: cs_live_a1EiuO2EpGpMA1m1hMW4swsH96G1KDps0NXtKWRQp73XZK4aymHsngX5PF",
      "details": {},
      "timestamp": "2025-12-30T03:07:49.205079"
    },
    {
      "test": "Duplicate Reminder Prevention: Create Booking",
      "status": "\u2705 PASS",
      "message": "Test booking created: 9b8770e2-27e1-4b42-901f-3ef8f342082b",
      "details": {},
      "timestamp": "2025-12-30T03:07:49.324669"
    },
    {
      "test": "Duplicate Reminder Prevention: Initial Status",
      "status": "\u2705 PASS",
      "message": "Initial pending reminders: 0",
      "details": {},
      "timestamp": "2025-12-30T03:07:49.333930"
    },
    {
      "test": "Duplicate Reminder Prevention: First Trigger",
      "status": "\u2705 PASS",
      "message": "First trigger: 0 sent, 0 skipped",
      "details": {},
      "timestamp": "2025-12-30T03:07:49.392497"
    },
    {
      "test": "Duplicate Reminder Prevention: Second Trigger",
      "status": "\u2705 PASS",
      "message": "Second trigger: 0 sent, 0 skipped",
      "details": {},
      "timestamp": "2025-12-30T03:07:49.392528"
    },
    {
      "test": "Duplicate Reminder Prevention: Final Status",
      "status": "\u2705 PASS",
      "message": "Final status: 3 sent, 0 pending",
      "details": {},
      "timestamp": "2025-12-30T03:07:51.401738"
    },
    {
      "test": "Duplicate Reminder Prevention: Third Trigger",
      "status": "\u2705 PASS",
      "message": "Third trigger correctly sent 0 reminders: 0 sent, 0 skipped (already processed)",
      "details": {},
      "timestamp": "2025-12-30T03:07:51.411485"
    },
    {
      "test": "Duplicate Reminder Prevention: Validation",
      "status": "\u274c FAIL",
      "message": "\u274c FAILED: 0 reminders sent (expected 1), duplicate prevention not working",
      "details": {},
      "timestamp": "2025-12-30T03:07:51.411510"
    },
    {
      "test": "Direct Mailgun Test",
      "status": "\u2705 PASS",
      "message": "Email sent successfully: Queued. Thank you.",
      "details": {},
      "timestamp": "2025-12-30T03:07:51.604397"
    },
    {
      "test": "Price Calculation",
      "status": "\u2705 PASS",
      "message": "Price calculated: $155.85 for 26.29km",
      "details": {},
      "timestamp": "2025-12-30T03:07:51.739740"
    },
    {
      "test": "Create Booking (EN)",
      "status": "\u2705 PASS",
      "message": "Booking created: 573ca933-05d3-4f93-ac17-157128634cb7",
      "details": {},
      "timestamp": "2025-12-30T03:07:51.749042"
    },
    {
      "test": "Get Bookings",
      "status": "\u2705 PASS",
      "message": "Retrieved 50 bookings",
      "details": {},
      "timestamp": "2025-12-30T03:07:51.799471"
    },
    {
      "test": "Create Booking (EN)",
      "status": "\u2705 PASS",
      "message": "Booking created: 49ebf469-8c30-4004-abf2-d6daa66a9be7",
      "details": {},
      "timestamp": "2025-12-30T03:07:51.849717"
    },
    {
      "test": "Stripe Webhook Test",
      "status": "\u274c FAIL",
      "message": "Webhook failed with status 400",
      "details": "{\"detail\":\"Missing Stripe signature\"}",
      "timestamp": "2025-12-30T03:07:51.897276"
    },
    {
      "test": "Google OAuth Endpoint",
      "status": "\u2705 PASS",
      "message": "Google OAuth endpoint exists and validates sessions correctly",
      "details": {},
      "timestamp": "2025-12-30T03:07:51.988745"
    },
    {
      "test": "Password Reset Request",
      "status": "\u2705 PASS",
      "message": "Password reset request successful: If this email is registered, you will receive a password reset link.",
      "details": {},
      "timestamp": "2025-12-30T03:07:52.037534"
    },
    {
      "test": "Password Reset Validate",
      "status": "\u2705 PASS",
      "message": "Password reset validation endpoint working correctly",
      "details": {},
      "timestamp": "2025-12-30T03:07:52.044619"
    },
    {
      "test": "Password Reset Confirm",
      "status": "\u2705 PASS",
      "message": "Password reset confirm endpoint working correctly",
      "details": {},
      "timestamp": "2025-12-30T03:07:52.051825"
    },
    {
      "test": "Admin Auth Me Endpoint",
      "status": "\u2705 PASS",
      "message": "Admin auth/me endpoint exists (status: 200)",
      "details": {},
      "timestamp": "2025-12-30T03:07:52.099741"
    }
  ],
  "booking_ids": [
    "573ca933-05d3-4f93-ac17-157128634cb7",
    "49ebf469-8c30-4004-abf2-d6daa66a9be7"
  ]
}