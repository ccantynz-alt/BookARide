{
  "timestamp": "2025-12-19T19:31:38.004500",
  "success": false,
  "results": [
    {
      "test": "Health Check",
      "status": "\u2705 PASS",
      "message": "API is healthy: {'status': 'healthy', 'service': 'bookaride-api'}",
      "details": {},
      "timestamp": "2025-12-19T19:31:10.958774"
    },
    {
      "test": "Admin Login",
      "status": "\u2705 PASS",
      "message": "Admin authentication successful",
      "details": {},
      "timestamp": "2025-12-19T19:31:11.194175"
    },
    {
      "test": "24-Hour Rule: Within 24h",
      "status": "\u274c FAIL",
      "message": "Booking within 24h has wrong status: 'pending' (expected 'pending_approval')",
      "details": {},
      "timestamp": "2025-12-19T19:31:13.064020"
    },
    {
      "test": "24-Hour Rule: Beyond 24h",
      "status": "\u2705 PASS",
      "message": "Booking beyond 24h correctly set to 'pending': 983a1fc3-7394-44f2-9cf9-288f0177ebc9",
      "details": {},
      "timestamp": "2025-12-19T19:31:14.829372"
    },
    {
      "test": "Admin Dashboard: Pending Approval Count",
      "status": "\u2705 PASS",
      "message": "Found 7 bookings with status 'pending_approval'",
      "details": {},
      "timestamp": "2025-12-19T19:31:14.872916"
    },
    {
      "test": "Admin Dashboard: Alert Banner Data",
      "status": "\u2705 PASS",
      "message": "Admin dashboard should show alert banner with 7 booking(s) needing approval",
      "details": {},
      "timestamp": "2025-12-19T19:31:14.872944"
    },
    {
      "test": "SEO Pages: Backend Support",
      "status": "\u2705 PASS",
      "message": "SEO routes accessible: ['/auckland-cbd-airport', '/ponsonby-to-airport', '/parnell-to-airport', '/newmarket-to-airport']",
      "details": {},
      "timestamp": "2025-12-19T19:31:14.924311"
    },
    {
      "test": "Shuttle Availability",
      "status": "\u274c FAIL",
      "message": "Invalid departures format: {'date': '2025-12-20', 'departures': {'06:00': {'passengers': 0, 'bookings': 0, 'available': True, 'pricePerPerson': 100}, '08:00': {'passengers': 0, 'bookings': 0, 'available': True, 'pricePerPerson': 100}, '10:00': {'passengers': 0, 'bookings': 0, 'available': True, 'pricePerPerson': 100}, '12:00': {'passengers': 0, 'bookings': 0, 'available': True, 'pricePerPerson': 100}, '14:00': {'passengers': 0, 'bookings': 0, 'available': True, 'pricePerPerson': 100}, '16:00': {'passengers': 0, 'bookings': 0, 'available': True, 'pricePerPerson': 100}, '18:00': {'passengers': 0, 'bookings': 0, 'available': True, 'pricePerPerson': 100}, '20:00': {'passengers': 0, 'bookings': 0, 'available': True, 'pricePerPerson': 100}, '22:00': {'passengers': 0, 'bookings': 0, 'available': True, 'pricePerPerson': 100}}, 'currentPassengers': 0}",
      "details": {},
      "timestamp": "2025-12-19T19:31:14.933773"
    },
    {
      "test": "Shuttle Booking",
      "status": "\u274c FAIL",
      "message": "No booking ID in response: {'success': True, 'bookingId': '1163dd33-f344-4c38-9ea3-2b0c1fffa602', 'checkoutUrl': 'https://checkout.stripe.com/c/pay/cs_live_a15LjwMDsrSdeBMezlr41Ah4qgPNxCMdz4oVaePQnyynxIlOCTOIRntfSA#fidnandhYHdWcXxpYCc%2FJ2FgY2RwaXEnKSdkdWxOYHwnPyd1blppbHNgWnZdSEp9XGxSd0NMZEJnTWp8SkY3ZHJLXCcpJ2N3amhWYHdzYHcnP3F3cGApJ2dkZm5id2pwa2FGamlqdyc%2FJyZjY2NjY2MnKSdpZHxqcHFRfHVgJz8ndmxrYmlgWmxxYGgnKSdga2RnaWBVaWRmYG1qaWFgd3YnP3F3cGB4JSUl', 'estimatedPrice': 100, 'totalEstimated': 200}",
      "details": {},
      "timestamp": "2025-12-19T19:31:15.387402"
    },
    {
      "test": "Shuttle Departures (Admin)",
      "status": "\u274c FAIL",
      "message": "Invalid departures format: {'date': '2025-12-20', 'departures': {'06:00': {'time': '06:00', 'bookings': [], 'totalPassengers': 0, 'pricePerPerson': 100, 'totalRevenue': 0, 'canRun': False}, '08:00': {'time': '08:00', 'bookings': [], 'totalPassengers': 0, 'pricePerPerson': 100, 'totalRevenue': 0, 'canRun': False}, '10:00': {'time': '10:00', 'bookings': [{'id': '1163dd33-f344-4c38-9ea3-2b0c1fffa602', 'bookingType': 'shuttle', 'date': '2025-12-20', 'departureTime': '10:00', 'pickupAddress': 'Sofitel Auckland Viaduct Harbour', 'dropoffAddress': 'Auckland International Airport', 'passengers': 2, 'name': 'Test Customer', 'email': 'test@example.com', 'phone': '021 123 4567', 'notes': 'Test booking', 'flightNumber': '', 'estimatedPrice': 100, 'finalPrice': None, 'totalEstimated': 200, 'status': 'authorized', 'paymentStatus': 'pending_authorization', 'stripePaymentIntentId': None, 'createdAt': '2025-12-19T19:31:14.940221+00:00', 'chargedAt': None, 'needsApproval': False, 'stripeCheckoutSessionId': 'cs_live_a15LjwMDsrSdeBMezlr41Ah4qgPNxCMdz4oVaePQnyynxIlOCTOIRntfSA'}], 'totalPassengers': 2, 'pricePerPerson': 100, 'totalRevenue': 200, 'canRun': True}, '12:00': {'time': '12:00', 'bookings': [], 'totalPassengers': 0, 'pricePerPerson': 100, 'totalRevenue': 0, 'canRun': False}, '14:00': {'time': '14:00', 'bookings': [], 'totalPassengers': 0, 'pricePerPerson': 100, 'totalRevenue': 0, 'canRun': False}, '16:00': {'time': '16:00', 'bookings': [], 'totalPassengers': 0, 'pricePerPerson': 100, 'totalRevenue': 0, 'canRun': False}, '18:00': {'time': '18:00', 'bookings': [], 'totalPassengers': 0, 'pricePerPerson': 100, 'totalRevenue': 0, 'canRun': False}, '20:00': {'time': '20:00', 'bookings': [], 'totalPassengers': 0, 'pricePerPerson': 100, 'totalRevenue': 0, 'canRun': False}, '22:00': {'time': '22:00', 'bookings': [], 'totalPassengers': 0, 'pricePerPerson': 100, 'totalRevenue': 0, 'canRun': False}}}",
      "details": {},
      "timestamp": "2025-12-19T19:31:15.396768"
    },
    {
      "test": "Shuttle Route Optimization",
      "status": "\u2705 PASS",
      "message": "Route optimization returned 0 stops with Google Maps URL",
      "details": {},
      "timestamp": "2025-12-19T19:31:15.404356"
    },
    {
      "test": "Shuttle Route: Google Maps URL",
      "status": "\u2705 PASS",
      "message": "Valid Google Maps URL generated: https://www.google.com/maps/dir/?api=1&origin=Sofitel%20Auckland%20Viaduct%20Harbour&destination=Auc...",
      "details": {},
      "timestamp": "2025-12-19T19:31:15.404370"
    },
    {
      "test": "Pricing: Orewa to Airport (ratePerKm)",
      "status": "\u2705 PASS",
      "message": "Correct pricing with ratePerKm: $150.18 for 60.8km at $2.47/km (expected ~$2.47/km)",
      "details": {},
      "timestamp": "2025-12-19T19:31:15.658924"
    },
    {
      "test": "Pricing: Short Trip (ratePerKm)",
      "status": "\u2705 PASS",
      "message": "Correct short trip pricing with ratePerKm: $110.52 for 9.21km at $12.0/km (expected $12.0/km)",
      "details": {},
      "timestamp": "2025-12-19T19:31:15.830382"
    },
    {
      "test": "Booking Update: Return Trip Sync (Set)",
      "status": "\u2705 PASS",
      "message": "bookReturn auto-synced to true when returnDate set to 2025-12-25",
      "details": {},
      "timestamp": "2025-12-19T19:31:15.873796"
    },
    {
      "test": "Booking Update: Return Trip Sync (Clear)",
      "status": "\u2705 PASS",
      "message": "bookReturn auto-synced to false when returnDate cleared",
      "details": {},
      "timestamp": "2025-12-19T19:31:15.903716"
    },
    {
      "test": "Email Generation: Manual Booking",
      "status": "\u2705 PASS",
      "message": "Manual booking created: 72d185d1-58af-4f82-80ba-5a99aaeeff2d",
      "details": {},
      "timestamp": "2025-12-19T19:31:18.192767"
    },
    {
      "test": "Email Generation: Return Trips",
      "status": "\u2705 PASS",
      "message": "Confirmation email resent successfully: Confirmation email and SMS resent successfully!",
      "details": {},
      "timestamp": "2025-12-19T19:31:18.614991"
    },
    {
      "test": "Flight Tracker",
      "status": "\u2705 PASS",
      "message": "Flight tracking working: EK448, Status: In Flight, Live: True",
      "details": {},
      "timestamp": "2025-12-19T19:31:18.875478"
    },
    {
      "test": "Driver Assignment Flow",
      "status": "\u274c FAIL",
      "message": "Unexpected assignment response: Driver John Smith assigned to OUTBOUND trip successfully",
      "details": {},
      "timestamp": "2025-12-19T19:31:20.841084"
    },
    {
      "test": "AI Email Auto-Responder",
      "status": "\u2705 PASS",
      "message": "AI auto-responder working: AI response sent",
      "details": {},
      "timestamp": "2025-12-19T19:31:29.029945"
    },
    {
      "test": "Payment Checkout Creation",
      "status": "\u2705 PASS",
      "message": "Checkout session created successfully: cs_live_a1a2dcYwfJ65ERjFyM5zEwrStbwj52T4V62xWVR0lU2AYe78iAnstCspbu",
      "details": {},
      "timestamp": "2025-12-19T19:31:30.910058"
    },
    {
      "test": "Duplicate Reminder Prevention: Create Booking",
      "status": "\u2705 PASS",
      "message": "Test booking created: 00f60caa-0489-4779-8fa8-eb89c81c8d12",
      "details": {},
      "timestamp": "2025-12-19T19:31:31.532286"
    },
    {
      "test": "Duplicate Reminder Prevention: Initial Status",
      "status": "\u2705 PASS",
      "message": "Initial pending reminders: 1",
      "details": {},
      "timestamp": "2025-12-19T19:31:31.540909"
    },
    {
      "test": "Duplicate Reminder Prevention: First Trigger",
      "status": "\u2705 PASS",
      "message": "First trigger: 0 sent, 0 skipped",
      "details": {},
      "timestamp": "2025-12-19T19:31:31.975314"
    },
    {
      "test": "Duplicate Reminder Prevention: Second Trigger",
      "status": "\u2705 PASS",
      "message": "Second trigger: 0 sent, 0 skipped",
      "details": {},
      "timestamp": "2025-12-19T19:31:31.975336"
    },
    {
      "test": "Duplicate Reminder Prevention: Final Status",
      "status": "\u2705 PASS",
      "message": "Final status: 1 sent, 0 pending",
      "details": {},
      "timestamp": "2025-12-19T19:31:33.985715"
    },
    {
      "test": "Duplicate Reminder Prevention: Third Trigger",
      "status": "\u2705 PASS",
      "message": "Third trigger correctly sent 0 reminders: 0 sent, 0 skipped (already processed)",
      "details": {},
      "timestamp": "2025-12-19T19:31:33.993394"
    },
    {
      "test": "Duplicate Reminder Prevention: Validation",
      "status": "\u274c FAIL",
      "message": "\u274c FAILED: 0 reminders sent (expected 1), duplicate prevention not working",
      "details": {},
      "timestamp": "2025-12-19T19:31:33.993414"
    },
    {
      "test": "Direct Mailgun Test",
      "status": "\u2705 PASS",
      "message": "Email sent successfully: Queued. Thank you.",
      "details": {},
      "timestamp": "2025-12-19T19:31:34.225489"
    },
    {
      "test": "Price Calculation",
      "status": "\u2705 PASS",
      "message": "Price calculated: $136.45 for 26.29km",
      "details": {},
      "timestamp": "2025-12-19T19:31:34.417989"
    },
    {
      "test": "Create Booking (EN)",
      "status": "\u2705 PASS",
      "message": "Booking created: eb63e2f9-e62f-4475-980d-38e1e81c8cb8",
      "details": {},
      "timestamp": "2025-12-19T19:31:36.217859"
    },
    {
      "test": "Get Bookings",
      "status": "\u2705 PASS",
      "message": "Retrieved 127 bookings",
      "details": {},
      "timestamp": "2025-12-19T19:31:36.235717"
    },
    {
      "test": "Create Booking (EN)",
      "status": "\u2705 PASS",
      "message": "Booking created: f5a6cb24-c454-4070-bb6f-37588f66d35f",
      "details": {},
      "timestamp": "2025-12-19T19:31:37.826462"
    },
    {
      "test": "Stripe Webhook Test",
      "status": "\u274c FAIL",
      "message": "Webhook failed with status 400",
      "details": "{\"detail\":\"Missing Stripe signature\"}",
      "timestamp": "2025-12-19T19:31:37.835149"
    },
    {
      "test": "Google OAuth Endpoint",
      "status": "\u2705 PASS",
      "message": "Google OAuth endpoint exists and validates sessions correctly",
      "details": {},
      "timestamp": "2025-12-19T19:31:37.972401"
    },
    {
      "test": "Password Reset Request",
      "status": "\u2705 PASS",
      "message": "Password reset request successful: If this email is registered, you will receive a password reset link.",
      "details": {},
      "timestamp": "2025-12-19T19:31:37.980918"
    },
    {
      "test": "Password Reset Validate",
      "status": "\u2705 PASS",
      "message": "Password reset validation endpoint working correctly",
      "details": {},
      "timestamp": "2025-12-19T19:31:37.989495"
    },
    {
      "test": "Password Reset Confirm",
      "status": "\u2705 PASS",
      "message": "Password reset confirm endpoint working correctly",
      "details": {},
      "timestamp": "2025-12-19T19:31:37.997087"
    },
    {
      "test": "Admin Auth Me Endpoint",
      "status": "\u2705 PASS",
      "message": "Admin auth/me endpoint exists (status: 200)",
      "details": {},
      "timestamp": "2025-12-19T19:31:38.004315"
    }
  ],
  "booking_ids": [
    "eb63e2f9-e62f-4475-980d-38e1e81c8cb8",
    "f5a6cb24-c454-4070-bb6f-37588f66d35f"
  ]
}