{
  "timestamp": "2025-12-30T09:04:03.055981",
  "success": false,
  "results": [
    {
      "test": "Health Check",
      "status": "\u2705 PASS",
      "message": "API is healthy: {'status': 'healthy', 'service': 'bookaride-api'}",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.027194"
    },
    {
      "test": "Admin Login",
      "status": "\u2705 PASS",
      "message": "Admin authentication successful",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.263526"
    },
    {
      "test": "Return Flight: With Flight Number",
      "status": "\u2705 PASS",
      "message": "Booking created successfully with return flight NZ456: 30464683-23be-4380-b2c9-9a5b0a0bdd8f, Ref: #160",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.309165"
    },
    {
      "test": "Return Flight: Without Flight Number",
      "status": "\u2705 PASS",
      "message": "Validation correctly rejected booking without return flight number",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.361092"
    },
    {
      "test": "Return Flight: Existing Booking Retrieval",
      "status": "\u2705 PASS",
      "message": "Found booking 7ed7315d-47b3-4a3c-9f7a-fc4d0140a694 with return flight NZ456",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.400364"
    },
    {
      "test": "Return Flight: Email Preview",
      "status": "\u2705 PASS",
      "message": "Email preview contains return flight number NZ456",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.416428"
    },
    {
      "test": "Customer Confirmation: Booking Creation",
      "status": "\u2705 PASS",
      "message": "Booking created successfully: ID=airport-booking-fix, Ref=#161",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.431462"
    },
    {
      "test": "Customer Confirmation: Data Validation",
      "status": "\u2705 PASS",
      "message": "Booking data correctly stored and returned",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.431486"
    },
    {
      "test": "Customer Confirmation: Admin Fetch Bookings",
      "status": "\u2705 PASS",
      "message": "Admin can fetch 50 bookings without errors",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.469534"
    },
    {
      "test": "Customer Confirmation: Search Test Customer",
      "status": "\u2705 PASS",
      "message": "Search for 'Test Customer' found booking: 1e33c96d-de55-4c4d-9192-32b8608dd11f",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.491904"
    },
    {
      "test": "Customer Confirmation: Backend Logs",
      "status": "\u2705 PASS",
      "message": "Backend should log 'Queued customer confirmation for booking #161' (check supervisor logs)",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.491923"
    },
    {
      "test": "Booking Creation Performance",
      "status": "\u2705 PASS",
      "message": "Booking created quickly in 0.05s (background tasks working): c484b3d3-1e86-4c16-82ae-b90126cd967f",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.542881"
    },
    {
      "test": "Notification Preference: Email Only",
      "status": "\u2705 PASS",
      "message": "Booking created with email-only preference: 81e0a022-cf34-4a64-b24c-943ab44d5886",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.556058"
    },
    {
      "test": "Notification Preference: SMS Only",
      "status": "\u2705 PASS",
      "message": "Booking created with SMS-only preference: 2de259b7-2ee7-446e-a91f-0047183e5db9",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.572158"
    },
    {
      "test": "Backend Logs Check",
      "status": "\u2705 PASS",
      "message": "Backend logs accessible (check for 'Background task completed' messages after booking creation)",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.582105"
    },
    {
      "test": "Historical Import: Status Endpoint",
      "status": "\u2705 PASS",
      "message": "Import status: 3361 total bookings, 3132 WordPress imports",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.639690"
    },
    {
      "test": "Historical Import: Expected Counts",
      "status": "\u2705 PASS",
      "message": "Counts match expected range: total=3361, imports=3132",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.639714"
    },
    {
      "test": "Historical Import: CSV Upload",
      "status": "\u2705 PASS",
      "message": "CSV import successful: 0 imported, 2 skipped, 0 errors",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.657603"
    },
    {
      "test": "Historical Import: Duplicate Detection",
      "status": "\u2705 PASS",
      "message": "Duplicate detection working: 0 imported, 2 skipped on second upload",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.673217"
    },
    {
      "test": "Historical Import: Bookings List",
      "status": "\u2705 PASS",
      "message": "Bookings list loaded: 50 total, 16 WordPress imports, 0 test imports",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.712958"
    },
    {
      "test": "Historical Import: Required Fields",
      "status": "\u2705 PASS",
      "message": "Imported bookings have all required fields: ['original_booking_id', 'imported_from', 'imported_at', 'pricing']",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.712985"
    },
    {
      "test": "Historical Import: Large Dataset",
      "status": "\u2705 PASS",
      "message": "Smaller dataset: 50 bookings (may be test environment)",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.712990"
    },
    {
      "test": "Batch Calendar Sync: Status Check",
      "status": "\u2705 PASS",
      "message": "Status endpoint working: 3072 remaining, 60 already synced, last_task: None",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.735645"
    },
    {
      "test": "Batch Calendar Sync: Start Sync",
      "status": "\u2705 PASS",
      "message": "Skipping sync start test - too many bookings (3072). Would take too long.",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.735829"
    },
    {
      "test": "Archive System: Create Test Booking",
      "status": "\u2705 PASS",
      "message": "Test booking created: c747cf7b-bf79-4097-8761-7a3ffd3cfa99, Ref: #165",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.833149"
    },
    {
      "test": "Archive System: Mark Completed",
      "status": "\u2705 PASS",
      "message": "Booking marked as completed",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.857750"
    },
    {
      "test": "Archive System: Archive Booking",
      "status": "\u2705 PASS",
      "message": "Booking archived successfully: Booking archived successfully, ID: c747cf7b-bf79-4097-8761-7a3ffd3cfa99, Ref: #165",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.934621"
    },
    {
      "test": "Archive System: Get Archived Bookings",
      "status": "\u2705 PASS",
      "message": "Retrieved 1 archived bookings (page 1, total: 1, totalPages: 1)",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.986587"
    },
    {
      "test": "Archive System: ArchivedAt Timestamp",
      "status": "\u2705 PASS",
      "message": "Archived booking has archivedAt timestamp: 2025-12-30T09:03:48.867923+00:00",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.986610"
    },
    {
      "test": "Archive System: Archive Search",
      "status": "\u2705 PASS",
      "message": "Archive search for 'TestArchive' returned 0 results",
      "details": {},
      "timestamp": "2025-12-30T09:03:48.996373"
    },
    {
      "test": "Archive System: Unarchive Booking",
      "status": "\u2705 PASS",
      "message": "Booking unarchived successfully: Booking restored from archive, ID: c747cf7b-bf79-4097-8761-7a3ffd3cfa99, Ref: #165",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.059806"
    },
    {
      "test": "Archive System: Verify Restored in Active",
      "status": "\u274c FAIL",
      "message": "Unarchived booking not found in active bookings list",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.207383"
    },
    {
      "test": "Archive System: Search All Bookings",
      "status": "\u2705 PASS",
      "message": "Search returned 0 total results: 100 active, 0 archived",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.411528"
    },
    {
      "test": "Archive System: isArchived Flag",
      "status": "\u2705 PASS",
      "message": "Results have isArchived flag: 0 archived, 100 active",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.411572"
    },
    {
      "test": "Archive System: Archive Count",
      "status": "\u2705 PASS",
      "message": "Archive count endpoint working: 0 archived bookings",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.430131"
    },
    {
      "test": "24-Hour Rule: Within 24h",
      "status": "\u2705 PASS",
      "message": "Booking within 24h correctly set to 'pending_approval': c8acf5cc-1c07-4844-88c1-28aca7719f72",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.531130"
    },
    {
      "test": "24-Hour Rule: Beyond 24h",
      "status": "\u2705 PASS",
      "message": "Booking beyond 24h correctly set to 'pending': 05317015-ab51-4636-9573-221b4c7c0e95",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.586022"
    },
    {
      "test": "Admin Dashboard: Pending Approval Count",
      "status": "\u2705 PASS",
      "message": "Found 11 bookings with status 'pending_approval'",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.711514"
    },
    {
      "test": "Admin Dashboard: Alert Banner Data",
      "status": "\u2705 PASS",
      "message": "Admin dashboard should show alert banner with 11 booking(s) needing approval",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.711537"
    },
    {
      "test": "SEO Pages: Backend Support",
      "status": "\u2705 PASS",
      "message": "SEO routes accessible: ['/auckland-cbd-airport', '/ponsonby-to-airport', '/parnell-to-airport', '/newmarket-to-airport']",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.793829"
    },
    {
      "test": "Shuttle Availability",
      "status": "\u2705 PASS",
      "message": "Shuttle availability returned 9 departure times with pricing",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.806324"
    },
    {
      "test": "Shuttle Booking",
      "status": "\u274c FAIL",
      "message": "Shuttle booking failed with status 400",
      "details": "{\"detail\":\"Not enough seats available for this departure\"}",
      "timestamp": "2025-12-30T09:03:49.837910"
    },
    {
      "test": "Shuttle Departures (Admin)",
      "status": "\u2705 PASS",
      "message": "Admin shuttle departures returned 9 departure slots",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.857776"
    },
    {
      "test": "Shuttle Departures: Bookings",
      "status": "\u2705 PASS",
      "message": "Found 5 shuttle bookings in departure grid",
      "details": {},
      "timestamp": "2025-12-30T09:03:49.857793"
    },
    {
      "test": "Shuttle Route Optimization",
      "status": "\u2705 PASS",
      "message": "Route optimization returned 0 stops with Google Maps URL",
      "details": {},
      "timestamp": "2025-12-30T09:03:50.062840"
    },
    {
      "test": "Shuttle Route: Google Maps URL",
      "status": "\u2705 PASS",
      "message": "Valid Google Maps URL generated: https://www.google.com/maps/dir/?api=1&origin=Sofitel%20Auckland%20Viaduct%20Harbour&destination=Auc...",
      "details": {},
      "timestamp": "2025-12-30T09:03:50.062859"
    },
    {
      "test": "GPS Tracking: Send Driver Link",
      "status": "\u2705 PASS",
      "message": "Tracking link sent successfully: sessionId=airport-booking-fix, trackingRef=Q3K2RS",
      "details": {},
      "timestamp": "2025-12-30T09:03:50.424842"
    },
    {
      "test": "GPS Tracking: Driver Session Info",
      "status": "\u2705 PASS",
      "message": "Driver session info retrieved: customer=Melvin, status=active",
      "details": {},
      "timestamp": "2025-12-30T09:03:50.473941"
    },
    {
      "test": "GPS Tracking: Driver Start",
      "status": "\u2705 PASS",
      "message": "Driver tracking started successfully: Tracking already active",
      "details": {},
      "timestamp": "2025-12-30T09:03:50.483085"
    },
    {
      "test": "GPS Tracking: Driver Location Update",
      "status": "\u2705 PASS",
      "message": "Driver location updated successfully: lat=-36.862, lng=174.7682",
      "details": {},
      "timestamp": "2025-12-30T09:03:50.532531"
    },
    {
      "test": "GPS Tracking: Customer View",
      "status": "\u2705 PASS",
      "message": "Customer tracking working: driver=Karan , ETA=14 minutes, location={'lat': -36.862, 'lng': 174.7682, 'heading': None, 'speed': None, 'accuracy': None, 'timestamp': '2025-12-30T09:03:50.487780+00:00'}",
      "details": {},
      "timestamp": "2025-12-30T09:03:50.721228"
    },
    {
      "test": "GPS Tracking: Complete Flow",
      "status": "\u2705 PASS",
      "message": "Complete GPS tracking flow working: sessionId=airport-booking-fix, trackingRef=Q3K2RS",
      "details": {},
      "timestamp": "2025-12-30T09:03:50.721258"
    },
    {
      "test": "Pricing: Orewa to Airport (ratePerKm)",
      "status": "\u2705 PASS",
      "message": "Correct pricing with ratePerKm: $171.72 for 60.8km at $2.74/km (expected ~$2.47/km)",
      "details": {},
      "timestamp": "2025-12-30T09:03:50.907836"
    },
    {
      "test": "Pricing: Short Trip (ratePerKm)",
      "status": "\u274c FAIL",
      "message": "Incorrect rate per km for short trip: $13.33/km for 9.7km (expected $12.0/km)",
      "details": {},
      "timestamp": "2025-12-30T09:03:51.133791"
    },
    {
      "test": "Booking Update: Return Trip Sync (Set)",
      "status": "\u2705 PASS",
      "message": "bookReturn auto-synced to true when returnDate set to 2025-12-25",
      "details": {},
      "timestamp": "2025-12-30T09:03:51.212536"
    },
    {
      "test": "Booking Update: Return Trip Sync (Clear)",
      "status": "\u2705 PASS",
      "message": "bookReturn auto-synced to false when returnDate cleared",
      "details": {},
      "timestamp": "2025-12-30T09:03:51.297999"
    },
    {
      "test": "Email Generation: Manual Booking",
      "status": "\u2705 PASS",
      "message": "Manual booking created: 5931ed68-42e7-45b1-86ab-792d9d40f2ae",
      "details": {},
      "timestamp": "2025-12-30T09:03:51.307506"
    },
    {
      "test": "Email Generation: Return Trips",
      "status": "\u2705 PASS",
      "message": "Confirmation email resent successfully: Confirmation email and SMS resent successfully!",
      "details": {},
      "timestamp": "2025-12-30T09:03:51.685049"
    },
    {
      "test": "Flight Tracker",
      "status": "\u274c FAIL",
      "message": "Incomplete flight data: Flight: EK448, Live: False, Status: On Time",
      "details": {},
      "timestamp": "2025-12-30T09:03:52.037753"
    },
    {
      "test": "Driver Assignment Flow",
      "status": "\u274c FAIL",
      "message": "Unexpected assignment response: Driver John Smith assigned to OUTBOUND trip successfully",
      "details": {},
      "timestamp": "2025-12-30T09:03:52.448348"
    },
    {
      "test": "AI Email Auto-Responder",
      "status": "\u2705 PASS",
      "message": "AI auto-responder working: AI response sent",
      "details": {},
      "timestamp": "2025-12-30T09:03:59.417931"
    },
    {
      "test": "Payment Checkout Creation",
      "status": "\u2705 PASS",
      "message": "Checkout session created successfully: cs_live_a1FqBVA6oYvwwXIzHrhWvCZfSEk5BD0WldlwKA81Jjb8QuU1C4FuHK3ZE8",
      "details": {},
      "timestamp": "2025-12-30T09:04:00.278807"
    },
    {
      "test": "Duplicate Reminder Prevention: Create Booking",
      "status": "\u2705 PASS",
      "message": "Test booking created: 4ed35d35-c5dc-4c13-b2ca-074544749956",
      "details": {},
      "timestamp": "2025-12-30T09:04:00.346275"
    },
    {
      "test": "Duplicate Reminder Prevention: Initial Status",
      "status": "\u2705 PASS",
      "message": "Initial pending reminders: 0",
      "details": {},
      "timestamp": "2025-12-30T09:04:00.365399"
    },
    {
      "test": "Duplicate Reminder Prevention: First Trigger",
      "status": "\u2705 PASS",
      "message": "First trigger: 0 sent, 0 skipped",
      "details": {},
      "timestamp": "2025-12-30T09:04:00.446234"
    },
    {
      "test": "Duplicate Reminder Prevention: Second Trigger",
      "status": "\u2705 PASS",
      "message": "Second trigger: 0 sent, 0 skipped",
      "details": {},
      "timestamp": "2025-12-30T09:04:00.446256"
    },
    {
      "test": "Duplicate Reminder Prevention: Final Status",
      "status": "\u2705 PASS",
      "message": "Final status: 3 sent, 0 pending",
      "details": {},
      "timestamp": "2025-12-30T09:04:02.457411"
    },
    {
      "test": "Duplicate Reminder Prevention: Third Trigger",
      "status": "\u2705 PASS",
      "message": "Third trigger correctly sent 0 reminders: 0 sent, 0 skipped (already processed)",
      "details": {},
      "timestamp": "2025-12-30T09:04:02.466134"
    },
    {
      "test": "Duplicate Reminder Prevention: Validation",
      "status": "\u274c FAIL",
      "message": "\u274c FAILED: 0 reminders sent (expected 1), duplicate prevention not working",
      "details": {},
      "timestamp": "2025-12-30T09:04:02.466153"
    },
    {
      "test": "Direct Mailgun Test",
      "status": "\u2705 PASS",
      "message": "Email sent successfully: Queued. Thank you.",
      "details": {},
      "timestamp": "2025-12-30T09:04:02.629768"
    },
    {
      "test": "Price Calculation",
      "status": "\u2705 PASS",
      "message": "Price calculated: $155.85 for 26.29km",
      "details": {},
      "timestamp": "2025-12-30T09:04:02.787123"
    },
    {
      "test": "Create Booking (EN)",
      "status": "\u2705 PASS",
      "message": "Booking created: 597b76fa-a6e1-479f-a34a-9ce02910731d",
      "details": {},
      "timestamp": "2025-12-30T09:04:02.796123"
    },
    {
      "test": "Get Bookings",
      "status": "\u2705 PASS",
      "message": "Retrieved 50 bookings",
      "details": {},
      "timestamp": "2025-12-30T09:04:02.840699"
    },
    {
      "test": "Create Booking (EN)",
      "status": "\u2705 PASS",
      "message": "Booking created: eeb24a33-362c-4724-8254-cc1c240f40e8",
      "details": {},
      "timestamp": "2025-12-30T09:04:02.851154"
    },
    {
      "test": "Stripe Webhook Test",
      "status": "\u274c FAIL",
      "message": "Webhook failed with status 400",
      "details": "{\"detail\":\"Missing Stripe signature\"}",
      "timestamp": "2025-12-30T09:04:02.858592"
    },
    {
      "test": "Google OAuth Endpoint",
      "status": "\u2705 PASS",
      "message": "Google OAuth endpoint exists and validates sessions correctly",
      "details": {},
      "timestamp": "2025-12-30T09:04:02.979821"
    },
    {
      "test": "Password Reset Request",
      "status": "\u2705 PASS",
      "message": "Password reset request successful: If this email is registered, you will receive a password reset link.",
      "details": {},
      "timestamp": "2025-12-30T09:04:02.988495"
    },
    {
      "test": "Password Reset Validate",
      "status": "\u2705 PASS",
      "message": "Password reset validation endpoint working correctly",
      "details": {},
      "timestamp": "2025-12-30T09:04:02.996077"
    },
    {
      "test": "Password Reset Confirm",
      "status": "\u2705 PASS",
      "message": "Password reset confirm endpoint working correctly",
      "details": {},
      "timestamp": "2025-12-30T09:04:03.046790"
    },
    {
      "test": "Admin Auth Me Endpoint",
      "status": "\u2705 PASS",
      "message": "Admin auth/me endpoint exists (status: 200)",
      "details": {},
      "timestamp": "2025-12-30T09:04:03.055081"
    }
  ],
  "booking_ids": [
    "597b76fa-a6e1-479f-a34a-9ce02910731d",
    "eeb24a33-362c-4724-8254-cc1c240f40e8"
  ]
}